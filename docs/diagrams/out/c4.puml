@startuml

!include C4_Dynamic.puml
!include <tupadr3/common>
!include <tupadr3/font-awesome-5/server>
!include <tupadr3/font-awesome-5/sun>
!include <tupadr3/devicons/python>
!include <tupadr3/devicons/postgresql>
!include <tupadr3/devicons/angular>
!include <tupadr3/font-awesome-5/thermometer>
!include <tupadr3/font-awesome-5/lightbulb>
!include <tupadr3/font-awesome-5/telegram>
title C4

System_Boundary(139792223057760, $label="smarthome"){
	Container(139792223055648, $label="web app", $techn="angular", $descr="", $sprite="angular")
Container(139792223055984, $label="desktop app", $techn="angular, tauri", $descr="", $sprite="angular")
Container_Ext(139792223057280, $label="deconz_hub", $techn="REST API, websockets", $descr="", $sprite="server")
Container_Boundary(139792223057664, $label="raspberry"){
	Component(139792223056416, $label="API", $techn="FastAPI", $descr="", $sprite="python")
Component(139792223056560, $label="weather-service", $techn="Python", $descr="", $sprite="python")
Component(139792223057424, $label="driver_deconz", $techn="httpx, websockets", $descr="", $sprite="python")
ComponentDb(139792223057568, $label="db", $techn="PostgreSQL+TimescaleDB", $descr="Настройки, архивы", $sprite="postgresql")
Component(139792223056704, $label="yeelight-service", $techn="asyncio stream", $descr="", $sprite="python")
Component(139792223056848, $label="telegram-service", $techn="telegram", $descr="", $sprite="python")

}
Container_Ext(139792223056128, $label="Zigbee sensors", $techn="T, P, ...", $descr="", $sprite="thermometer")
Container_Ext(139792223056272, $label="Yeelight bulbs", $techn="Yeelight", $descr="", $sprite="lightbulb")

}
System_Ext(139792223056992, $label="Weather", $descr="", $sprite="sun")
System_Ext(139792223057136, $label="Telegram", $descr="", $sprite="telegram")



Rel(139792223055648, 139792223056416, "Uses", "http", "")
Rel(139792223055984, 139792223056416, "Uses", "http", "")
Rel_Back(139792223056992, 139792223056560, "Uses", "http", "")
BiRel(139792223057424, 139792223057280, "Uses", "http", "")
Rel(139792223057280, 139792223056128, "Uses", "zigbee", "")
Rel(139792223056704, 139792223056272, "R/W", "http,Wi-Fi", "")
Rel_Back(139792223057136, 139792223056848, "send", "http", "")
SHOW_LEGEND()
@enduml
