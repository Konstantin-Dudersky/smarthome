# Сервер 

## Зависимости

- Python3.10 - https://gist.github.com/Konstantin-Dudersky/2e5dfad8ff49c749e4421f87574b6713

- Poetry

  ```sh
  curl -sSL https://install.python-poetry.org | python3 -
  source ~/.poetry/env
  poetry config virtualenvs.in-project true
  ```

## Установка

1. Копируем проект с github

   ```sh
   mkdir ~/smarthome && cd ~/smarthome && sudo apt install git
   git clone https://github.com/Konstantin-Dudersky/smarthome.git
   cd smarthome
   ```

2. Установка сервера
   ```sh
   cd src/server
   poetry install --no-dev # poetry install
   
   ```

## Обновление

```sh
# синхронизировать исходники
cd ~/smarthome/smarthome
git fetch origin && git reset --hard origin/main && git clean -f -d
# обновить пакеты
cd ~/smarthome/smarthome/src/server
poetry update

```



# Yeelight

Сброс лампы до заводских:

1. Выключите переключатель освещения.
2. Включите и выключите переключатель освещения 5 раз. Не торопитесь, на каждое включение и выключение тратьте 2-3 секунды.
3. Лампочка замигает, через 5 секунд перезапустится и загорится белым цветом.

​    